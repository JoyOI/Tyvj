@model Forum
@{
    if (Model == null)
    {
        ViewBag.BannerTitle = "论坛";
        ViewBag.Title = "论坛";
    }
    else
    {
        ViewBag.BannerTitle = Model.Title;
        ViewBag.Title = Model.Title + " - 论坛";
    }
}

<div class="tyvj-left grid_9" id="topicList">
    <table class="tyvj-boder-top-red tyvj-shadow tyvj-list-case tyvj-block" ></table>

    <table class="tyvj-boder-top tyvj-shadow tyvj-list-discuss" id="lstTopics">
    </table>
</div>
<div class="tyvj-right grid_3">

    @if (Request.RequestContext.RouteData.Values["id"] != null)
    {
        <div class="tyvj-shadow tyvj-boder-top tyvj-content">
            <p>@Html.ActionLink("发表新主题", "Create", "Topic", new { id = Request.RequestContext.RouteData.Values["id"] }, null)</p>
        </div>
    }

    <div class="tyvj-shadow tyvj-boder-top tyvj-content" style="margin-top:20px;">
        @foreach (Forum item in ViewBag.ForumList)
        {
            <h3>@item.Title</h3>
            <div class="post-module-content">
                @foreach (Forum child in item.Children.OrderBy(x => x.Sort))
                {
                    <p>@Html.ActionLink(child.Title, "Index", "Forum", new { id = child.ID }, null)</p>
                }
            </div>
        }
    </div>

</div>
<div class="tyvj-clear"></div>


@if (Request.RequestContext.RouteData.Values["id"] != null)
{
    <script>
        id = @Request.RequestContext.RouteData.Values["id"];
    </script>
}