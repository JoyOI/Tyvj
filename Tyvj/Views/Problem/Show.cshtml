@model Problem
@{
    ViewBag.Title = string.Format("P{0} {1}", Model.ID, Model.Title);
}

<div class="tyvj-left" style="width:755px;">
    <div class="tyvj-shadow">
        <div class="tyvj-content-header">
            <strong>P@(Model.ID)</strong> @Model.Title
        </div>
        <div class="tyvj-content" style="padding-top:10px;">
            <div class="tyvj-content-subtitle">
                Time Limit: @(Model.TimeLimit)ms &nbsp;&nbsp; Memory Limit: @(Model.MemoryLimit)KiB &nbsp;&nbsp; Java类名: Main &nbsp;&nbsp; Int64格式控制符: %lld
            </div>
            @if (!string.IsNullOrEmpty(Model.Background))
            {
                <div class="tyvj-boder-top tyvj-content-inner">
                    <h2>背景</h2>
                    @Html.Sanitized(Model.Background)
                </div>
            }
            @if (!string.IsNullOrEmpty(Model.Description))
            {
                <div class="tyvj-boder-top tyvj-content-inner">
                    <h2>描述</h2>
                    @Html.Sanitized(Model.Description)
                </div>
            }
            @if (!string.IsNullOrEmpty(Model.Input))
            {
                <div class="tyvj-boder-top  tyvj-content-inner">
                    <h2>输入格式</h2>
                    @Html.Sanitized(Model.Input)
                </div>
            }
            @if (!string.IsNullOrEmpty(Model.Output))
            {
                <div class="tyvj-boder-top tyvj-content-inner">
                    <h2>输出格式</h2>
                    @Html.Sanitized(Model.Output)
                </div>
            }
            @if (Model.TestCases.Where(x => x.Type == TestCaseType.Sample).Count() > 0)
            { 
                <div class="tyvj-boder-top-red tyvj-content-inner">
                    @{
                        var number = 1;
                    }
                    @foreach (var sample in Model.TestCases.Where(x => x.Type == TestCaseType.Sample))
                    {
                        <h2>测试样例@(number++)</h2>
                        <h3>输入</h3>
                        <blockquote>@sample.Input</blockquote>
                        <h3>输出</h3>
                        <blockquote>@sample.Output</blockquote>
                    }
                </div>
            }
            @if (!string.IsNullOrEmpty(Model.Hint))
            {
                <div class="tyvj-boder-top tyvj-content-inner">
                    <h2>备注</h2>
                    @Html.Sanitized(Model.Hint)
                </div>
            }
        </div>
    </div>
</div>
<div class="tyvj-right" style="width:200px;">
    <ul class="section" id="actions">
        @if (User.Identity.IsAuthenticated)
        {
            <li><a class="highlight action" href="javascript:void(0);" id="btnLoadCodeEditBox">提交评测</a></li>
        }
        <li><a class="action" href="/p/@Model.ID/solution">查看题解</a></li>
        <li><a class="action" href="/p/@Model.ID/statuses" target="_self">查看本题提交记录</a></li>
    </ul>
    @if (User.Identity.IsAuthenticated && ViewBag.Statuses.Count > 0)
    {
        <div class="tyvj-border-top-gray tyvj-side-content">
            <h3>我的记录</h3>
            @foreach (vProblemStatus s in ViewBag.Statuses)
            { 
                <p>@s.Time <a href="/Status/@s.ID" class="judgeState@(s.ResultAsInt)">@s.Result</a></p>
            }
        </div>
    }
</div>

@if (User.Identity.IsAuthenticated)
{
    <div style="display:none">
        <div id="CodeEditBox">
            @using (Html.BeginForm("Create", "Status", FormMethod.Post, new { id = "frmSubmitCode" }))
            {
                @Html.AntiForgeryToken()
                <input type="hidden" value="@Model.ID" name="problem_id" />
                <textarea id="editor" name="code" style="width:600px;height:280px;font-size:12px;"></textarea>
                <p>
                    <select id="lstLanguages" name="language_id" class="select" style="width:100px;">
                        @{
                var i = 0;
                foreach (var name in CommonEnums.LanguageDisplay)
                {
                    if (((User)ViewBag.CurrentUser).CommonLanguageAsInt == i)
                    {
                        <option value="@(i++)" selected>@name</option>
                    }
                    else
                    {
                        <option value="@(i++)">@name</option>
                    }
                }
                        }
                    </select>
                    <input type="button" id="btnSubmitCode" class="button button-def" value="提交" />
                    <a href="#" id="btnClearCodeBox">清空代码</a>
                </p>
            }
        </div>
    </div>
}
